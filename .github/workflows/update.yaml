on:
  push:
    branches: [master]
    paths-ignore: [README.md]
jobs:
  sync:
    runs-on: ubuntu-latest
    steps:
    - uses: actions/checkout@v2
    - timeout-minutes: 5
      run:
        apt-get install -y ruby &&
        gem install pcbr &&
        ruby main.rb > README.md &&
        git add README.md &&
        git config --local user.email "$(git log --format='%ae' HEAD^!)" &&
        git config --local user.name "$(git log --format='%an' HEAD^!)" &&
        git commit -m "[Github Action]" &&
        git push
